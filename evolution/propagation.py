def propagate_gradient(h, u0, ts, grad = False, history = False):
    """Find the propagator of a system Hamiltonian h(t). The initial basis u0 can be a statem a unitary
    or a rectangular matrix made of several initial states. The ha
    """
    us_with_grad = []
    return us_with_grad
